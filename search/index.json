[{"content":"前言 前言的前言 此篇文章的图片以WebP格式托管在中国大陆的服务器上，WebP格式可以以很小的体积展示出惊艳的显示效果。这极大地减轻了您的设备的加载负担。我们已经尽最大努力保证您的访问体验。\n本篇博客也是一个测试项目。\nFeatured image 进入正题 由于疫情隔离在家很是无聊，突然在压箱底儿找到了个屏幕坏掉的Macbook。经过在🍟整点薯条群组内的灵魂交流，突然灵感迸发。调试了一段时间很是满意。下面我将会介绍我是如何利用 Surge for Mac 这个 SUPER POWERFUL 的代理软件优化我家里的网络，以及遇到的一些困难，并且我是如何解决的。\n我准备了什么 一台 Macbook Pro 2013 ｜CNY 0 Apple官网购买的 雷雳2转千兆以太网转换器 | CNY 223 Surge for Mac License ｜ CNY 145 这是我电脑的配置 我的部署方案 因为我们是想让这台旧Mac作旁路由， 所以直接将Mac连到路由器上就OK。\n我的MacBook屏幕是坏掉的，所以在初次部署的时候会有很多困难！ 为了方便以后操控电脑，我推荐使用Apple官方推出的VNC工具：Apple Remote Desktop 这个工具超级超级好用，延迟很低很丝滑。 别看到价格就劝退，要勤于Google。 Surge网关 相信看到我这篇文章的你已经是一位 power user of Surge。所以我们不对具体细节进行介绍。\n在有显示器的条件下操作： 去官网获取free trial安装包 倒入配置 推荐使用 TutuBetterRules！ MacOS仅在熄屏时才会开启VNC通道，所以你需要将其熄屏才能脱离显示器操作。 记得关闭所有电池选项 低电量模式选择 永不 点击右下角的选项...，请按下图设置： 在VNC上操作： 把电脑和路由器连接好后：\n进入Surge主界面，按照指引开启Surge的DHCP服务器。 网络设备选择：Ethernet 根据指引关闭路由器的DHCP服务器。 推荐观看这个视频，了解更详细的Surge部署技巧，本文不作详细介绍。 增强内容 Surge远程控制器 我们可以在Surge主界面 -\u0026gt; 更多 -\u0026gt; 通用 -\u0026gt; 远程控制器 内设置。 然后在Surge iOS内，通过UI操作控制你的Surge网关。 出门在外怎么办？自行google搭建FRP。 Web Dashboard Surge for Mac 提供了一个网页管理面板，这个面板可以比远程控制器操作更多内容。 同样在Surge主界面 -\u0026gt; 更多 -\u0026gt; 通用 -\u0026gt; 远程控制器 内设置。 出门在外怎么办？自行google搭建FRP。 MitM Surge网关可以作为一个amazing MitM Tool，我们需要先给想要被MitM的设备安装与网关相同的根证书。\n这里我推荐使用Airdrop安装（因为他不需要多余的步骤，直接就可以安装）。 Apple TV可以借助Surge网关的MitM功能，运行脚本为流媒体开启双字幕。这里不详细介绍。（因为我没有Apple TV！） How to? 🍿️DualSubs 我遇到的问题和解决办法 在Surge网关下观看YouTube会变得超级无敌慢，目前探索出了以下影响因素： 模块：Block HTTP/3 \u0026amp; QUIC 如果有类似问题的可以试试反复开关这个模块，观察是否有变化。 规则：AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP 这曾是老刘在推特力推的规则，但我观察到我的问题出现在这条规则上。 同样的，如果有类似问题的可以试试反复开关这个模块，观察是否有变化。 参数：udp-policy-not-supported-behaviour = REJECT 援引官方文档： 如果没有代理服务器支持 UDP 转发，可修改为「 direct 」或注释下条，但需注意同一目标主机名 TCP 请求与 UDP 请求的源地址不同所造成的隐私及安全风险。 这些问题显然都与UDP有关，如果还有问题出现，请自检本地或者咨询代理提供商。\nNAS Mini TimeMachine 在同一个局域网下，你的另外一台Mac上的Finder -\u0026gt; 位置 应该会显示作为Surge网关Mac的名称。 打开 TimeMachine设置 -\u0026gt; 添加备份磁盘.. ，Mac会自动检索到备份位置。 这里有两个位置即两个注册用户，我们以 tutu 为例。 输入密码。这里的密码即为tutu用户的锁屏密码。 输入密码之后就会自动配置时间机器，我们等待即可。 常见问题 如果你的被备份电脑开启了Surge而显示连接失败，请尝试在Surge配置文件增加： tun-excluded-routes = 239.255.255.250/32 239.255.255.250/32是组播地址，如果在连接VNC出现问题，也应尝试配置该参数。 Docker MacOS可以完美运行Docker，所以运行一些脚本，搭建私人影音库等等NAS能做的事他也能做到。\n安装 我们首先需要连接SSH，我这里使用NextSSH为例，FinalShell同理。 地址为Surge网关在内网中的地址，你的可能和我不一样。 端口填写默认的22端口，如果使用FRP工具，我不建议在公网暴露22端口。 密码即为锁屏密码。 我们使用homebrew安装docker brew install docker 什么？你还没有homebrew? /bin/bash -c \u0026#34;$(curl -fsSL https://raw.iqiq.io/Homebrew/install/HEAD/install.sh)\u0026#34; 使用 和其他系统一样，我们可以通过命令行控制docker。不过MacOS提供了一个图形管理界面（就是一个app）。 自己折腾吧！ 后记 欢迎加入我的telegram交流群:图图の翻斗後花園 本文只是提供一种思路，所有项目均为学习和研究目的，不得将本项目中任何内容用于违反国家/地区/组织等的法律法规或相关规定的其他用途。 所有直接或间接使用本项目的个人和组织，应24小时内完成学习和研究，并及时删除本项目中的所有内容。如对本项目的功能有需求，应自行开发相关功能。 ","date":"2022-12-09T00:00:00Z","image":"https://tutuis.me/ce5792552b8a496daecc793dccbfeadd.webp","permalink":"https://tutuis.me/OldMacRelive/","title":"关于一台老旧Mac变成了最强软路由的这档事"},{"content":"前言 本人非常喜欢折腾，于是有了这些项目。 这些项目的链接都放在这篇文章的大标题里面，也可以通过右边的目录快速导航。 我保证这些项目都是纯净的并且不加日志，首先我不缺订阅，其次我并不想了解你的隐私。 All for FREEEEEEEEEEEEEE. 关于 SLA: 我们不对SLA做任何保障，但是我们会尽最大努力保证可用度。 关于 ToS: 我们把ToS托管在了 👉🏻Github 这是一个公益项目，欢迎关注我的telegram Channel 👉🏻胡图图粉絲全球後援會 这也是一个自由的项目，欢迎大家加入同样自由的telegram group 👉🏻图图の翻斗後花園 URLShortener 它可以做什么？ 将一个超长链接缩短为 https://tuu.cat/xxxx 的形式。 非常适合AFF等需要优雅域名的场景。 注意事项 xxxx是一个随机字母与数字的组合，并不一定是4个字符(有可能更多)。 本着自由的宗旨，我们开放自定义短链接后缀，但要注意：过于简单的后缀可能会招致别有用心的网络攻击者扫描爆破，对隐私造成的不必要风险本站不负责任。 自定义后缀审计一些带有攻击性的词语，例如 d*ck、f*ck、p**sy、sb等。 本站有权拒绝菠菜、色情、诈骗等违法业务使用我们的服务。 我们保护您的隐私，只要您在合法合理的使用范围内，我们保证您的原链接不会被泄露。 本站使用Google的reCAPTCHA鉴权，初次访问可能会加载缓慢。 我们不保证SLA，但我们会尽最大努力维持可用度。 我们不会收费，永远不会。 TutuBetterRules 可能是最好用的全平台代理软件分流配置。 我们正在对其进行持续完善更新，进入GitHub 详细了解。 SubConverter 它可以做什么？ 功能：将不同平台的订阅链接互相转换。 安全性：我们拥有一个无任何日志的纯净后端，您的订阅链接将非常安全地储存在您的本地，并不经手我们的服务器，我们保证这个过程是完全私密的。 特点：可以一键套取TutuBetterRules分流配置，这可能是最好用的iOS \u0026amp; MacOS的分流配置。 同样的，这个过程也不经手我们的服务器。 为了避免隐私风险，我们移除了集成在面板内的短链接服务。 注意事项 本站前端以及后端1、后端2均由Cloudflare进行路由（我爱Cloudflare！）。可能在特殊时期会遭到特殊的制裁，所以不保证大陆方向的可用性（但是正常时期是可以用的）。 我们仍推荐您使用代理访问。 TelegramBot RSSub_Bot 这是一款可以帮助你监听RSS订阅更新的Bot，支持在群组和频道中发布。 特点： 支持telegraph应用内预览。 更多的定制化选择。 无限个RSS订阅，超快的解析速度。 我们换了一个超快的服务器。欢迎大家使用！ ","date":"2022-12-06T00:00:00Z","image":"https://tutuis.me/102424922_p0_master1200.webp","permalink":"https://tutuis.me/MyProject/","title":"私の折腾项目大公開!"},{"content":" 以下命令适用于Ubuntu 22.04系统，其他系统自行修改。 可以透过右侧Widget目录快速查找。 本文的命令大多是一键脚本，有其他顾虑请自行打开脚本审阅。 因为要常更新，所以不做多语言支持。 来源于互联网，有侵权请联系我删除。 featured image 开机 修改为root密码登录ssh #!/bin/bash echo root:改我 |sudo chpasswd root sudo sed -i 's/^#\\?PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config; sudo sed -i 's/^#\\?PasswordAuthentication.*/PasswordAuthentication yes/g' /etc/ssh/sshd_config; sudo service sshd restart 将汉字部分替换成你要修改的ssh登录密码，建议使用密码管理器生成随机强密码。 「适用于甲骨文」: 粘贴到开机页面 高级选项 \u0026ndash;\u0026gt; 粘贴Cloud-init脚本 里面 关闭系统防火墙 iptables -P INPUT ACCEPT iptables -P OUTPUT ACCEPT iptables -P FORWARD ACCEPT iptables -F 一般的VPS输入这四行就行，甲骨文还要输入下面两行： iptables-save \u0026gt; /etc/iptables/rules.v4 ip6tables-save \u0026gt; /etc/iptables/rules.v6 修改ssh端口 公网高强度扫描爆破ssh主要针对默认的22端口，为了防止一些不必要的损失，按照下面的指令修改为35768端口吧！\nsed -i 's/#Port 22/Port 35768/' /etc/ssh/sshd_config service ssh restart Port 35768 可替换为 1-65535 之间的任何数字\nsudo apt install netstat netstat -antp |grep ssh\n如果没把握，可以再处理一遍防火墙。\n如果操作iptables后发现和docker相关的服务不能访问，记得运行 systemctl stop docker systemctl start docker\n增强 BBR加速 wget -N --no-check-certificate \u0026quot;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh\u0026quot; \u0026amp;\u0026amp; chmod +x tcp.sh \u0026amp;\u0026amp; ./tcp.sh 如果没效果可以试试下面的不卸载内核版本：\nwget -N \u0026ndash;no-check-certificate \u0026ldquo;https://github.000060000.xyz/tcpx.sh\" \u0026amp;\u0026amp; chmod +x tcpx.sh \u0026amp;\u0026amp; ./tcpx.sh\n什么是BBR加速?\n宝塔面板 官方版 wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh \u0026amp;\u0026amp; sudo bash install.sh ed8484bec 开心版 wget -O install.sh http://io.bt.sy/install/install-ubuntu_6.0.sh \u0026amp;\u0026amp; sudo bash install.sh 国外版（aaPanel） wget -O install.sh http://www.aapanel.com/script/install-ubuntu_6.0_en.sh \u0026amp;\u0026amp; sudo bash install.sh aapanel DD 先安装必需依赖 apt-get install -y xz-utils openssl gawk file wget screen \u0026amp;\u0026amp; screen -S os 然后在screen下运行 wget \u0026ndash;no-check-certificate -O NewReinstall.sh https://git.io/newbetags \u0026amp;\u0026amp; chmod a+x NewReinstall.sh \u0026amp;\u0026amp; bash NewReinstall.sh\n脚本里面有很多系统版本，按照脚本注释选择。 如果10分钟以后连不上主机，请去控制台处理一遍防火墙。 查看流媒体解锁情况 经典永流传版 bash \u0026lt;(curl -L -s https://raw.githubusercontent.com/lmc999/RegionRestrictionCheck/main/check.sh) 由Neko提供的更快的脚本 bash \u0026lt;(curl -Ls unlock.moe) 只检测IPv4结果: bash \u0026lt;(curl -Ls unlock.moe) -m 4 只检测IPv6结果: bash \u0026lt;(curl -Ls unlock.moe) -m 6 测速 wget -qO- --no-check-certificate https://raw.githubusercontent.com/oooldking/script/master/superbench.sh | bash 查看线路信息 curl https://raw.githubusercontent.com/zhucaidan/mtr_trace/main/mtr_trace.sh|bash 安全 查看SSH登陆日志 grep \u0026quot;Failed password\u0026quot; /var/log/auth.log | wc -l 这个命令的输出即为SSH登陆失败的次数。 更多推荐阅读： 记一次树莓派(Raspbetty)系统ssh被爆破攻击日志分析 搭建 MTProto代理 curl -o MTProtoProxyInstall.sh -L https://git.io/fjo34 \u0026amp;\u0026amp; bash MTProtoProxyInstall.sh http代理 curl -L https://raw.githubusercontent.com/snail007/proxy_admin_free/master/install_auto.sh | bash Socks5代理 wget -q -N --no-check-certificate https://raw.githubusercontent.com/wyx176/nps-socks5/master/install.sh \u0026amp;\u0026amp; chmod 777 install.sh \u0026amp;\u0026amp; bash install.sh 附带管理面板 面板地址：yourIP:18080 默认账号密码：admin admin GitHub地址：NPS-Socks5 一键转发 wget --no-check-certificate -qO natcfg.sh https://raw.githubusercontent.com/arloor/iptablesUtils/master/natcfg.sh \u0026amp;\u0026amp; bash natcfg.sh More to be continued.. 欢迎加入我的Telegram聊天群：https://t.me/hututu000 😻 感谢 Luca的频道 rSakuras ","date":"2022-12-01T00:00:00Z","image":"https://tutuis.me/jammy-jellyfish-wallpaper.png","permalink":"https://tutuis.me/Command-on-Ubuntu/","title":"🧰工具箱｜一些常用的Linux命令"},{"content":" 前言 最近的Telegram私聊广告莫名很多，使用这个bot的防私聊插件可以很好的缓解广告的打扰。刚好手头有闲置的VPS，索性按照教程简单搭建下。（其实好早就搭建好了🤪 本教程基于 Ubuntu 22.04 系统，搭建 Pagermaid-Pyro 的演示环境为AWS-Lightsail机器，其他系统或IDC请自行修改命令安装。\nGithub 开源地址：https://github.com/TeamPGM/PagerMaid-Pyro 官方博客：https://xtaolabs.com 官方 Telegram 频道：@PagerMaid_Modify 在搭建之前您需要知道 Telegram没有明确说明支持Userbot的行为，被杜叔叔分遗产以及导致的任何损失和后果均与PagerMaid项目作者和本站无关。 您在使用本项目代码时即表示您已经同意本隐私协议并且允许我们以评估负载和修复代码的目的记录您 Bot 的在线状态和报错文件（除可能使用的信息之外，我们不会记录与收集任何信息）。 您需要的基础知识 SSH 连接Linux服务器\n切换用户为 root sudo -i\n略懂一些 Vim\n让我们开始吧! 开放端口 由于需要和telegram服务器通信，我们需要关闭系统内部的防火墙。执行以下代码关闭：\nsudo iptables -P INPUT ACCEPT sudo iptables -P FORWARD ACCEPT sudo iptables -P OUTPUT ACCEPT sudo iptables -F 如果您使用了云服务，请去您的云服务商控制台里开放所有端口。（以AWS-Lightsail为例）\nOracle请移步 网络-虚拟云网络-vcn-2022xxxx-xxxx-安全列表详细信息-入站规则-添加入站规则\n请你像我这样写： Azure在设置-网络-入站端口规则，请添加：\n源：Any 源端口范围：* 目标：Any 服务：Custom 目标端口范围：* 协议：Any 操作：允许 优先级：100 名称：随便写 其他的IDC请自行探索规律寻找，有些IDC是默认给开的。\n拉取项目 先切换为Root用户。\nsudo -i 在拉取项目之前，首先更新 git ，否则之后可能出现无法更新的情况。\nsudo apt install --upgrade git -y 这步就报错请自行Google：Ubuntu安装git。\n拉取项目至 /var/lib/pagermaid_pyro 目录。\ncd /var/lib \u0026amp;\u0026amp; git clone https://github.com/TeamPGM/PagerMaid-Pyro.git pagermaid_pyro \u0026amp;\u0026amp; cd pagermaid_pyro 很快就拉取完了。 安装依赖 首先更新下apt软件包，安装过程中可能会出现OK确认界面，直接确认即可，如果出现断开连接，必须重新登录root访问pagermaid_pyro目录。 （命令 cd /var/lib/pagermaid_pyro)\n完整安装依赖包 sudo apt install python3-pip imagemagick libwebp-dev neofetch libzbar-dev libxml2-dev libxslt-dev tesseract-ocr tesseract-ocr-all -y 安装软件包过程中，请喝杯咖啡稍等一会儿，安装完成后，继续安装 Python 依赖包，所有的操作都是在/var/lib/pagermaid_pyro目录下进行的，出现报错检查是否在此目录中。 done\n继续安装Python依赖 pip3 install -r requirements.txt 如果出现 ERROR: Could not open requirements file: [Errno 2] No such file or directory: 'requirements.txt' 报错，请先检查当前目录是否为 /var/lib/pagermaid_pyro ，如果位于该目录仍然报错，请重新执行 拉取项目 步骤。\nSuccess!\n修改配置文件 执行以下命令，将配置文件 config.gen.yml 复制一份并且命名为 config.yml\ncp config.gen.yml config.yml 申请Telegram API 在 https://my.telegram.org 登陆后点击API development tools 按图中这样非常随意的填好（越随意越好），然后点击Create appication. 保存好得到的App api_id 和App api_hash。 回到ssh工具里面，执行命令：\ncd /var/lib/pagermaid_pyro \u0026amp;\u0026amp; vim config.yml 不会vim的请自行Google:Vim使用教程\n如果你看到的是一片空白：\n你可能不是root用户 你可能不在正确目录 确定你执行过cp config.gen.yml config.yml? 使用你强大的Vim基础知识，将这里替换成你刚刚获取的。（千万不要删除引号！）\n运行Pagermaid_Pyro 输入以下指令：\npython3 -m pagermaid 此步需要填入完整的电话号码（eg：+8611451419198，需要带上国际区号）然后 Telegram 会向你的其他客户端发送验证码，填入验证码后，回车，如有两步验证密码，则再输入两步验证密码即可。\nEnter phone number or bot token: #此处填入手机号 Is \u0026#34;+8611451419198\u0026#34; correct? (y/N): y # 号码显示正确输入 y ,错误输入 The confirmation code has been sent via Telegram app Enter confirmation code: # 此处输入 Telegram APP 中收到的验证码 # 如果设置了两步验证，则会出现以下提示 The two-step verification is enabled and a password is required Password hint: None Enter password (empty to recover): # 此处输入两步验证密码 出现已启动提示，代表登录成功，此时可以去 Telegram 任意聊天发送 ,help 进行测试。 你的应该没有我这么多，查看 官方插件列表 按需安装。\n请选择 v2 分支，master 分支为 Pagermaid-Modify（旧版）的插件，二者插件不兼容。\n命令是 ,apt install xxxx，发在tg任意一个聊天中即可。\n防私聊插件的名字是 pmcaptcha，我们可以用,apt install pmcaptcha的命令发送到任何聊天中来安装它。\n写入守护进程 首先按下 Ctrl 键和 C 键停止运行，然后输入以下命令：\ncat \u0026lt;\u0026lt;\u0026#39;TEXT\u0026#39; \u0026gt; /etc/systemd/system/pagermaid_pyro.service [Unit] Description=PagerMaid-Pyro telegram utility daemon After=network.target [Install] WantedBy=multi-user.target [Service] Type=simple WorkingDirectory=/var/lib/pagermaid_pyro ExecStart=/usr/bin/python3 -m pagermaid Restart=always TEXT 设置完成后启动程序：\nsystemctl start pagermaid_pyro 设置为开机自启：\nsystemctl enable pagermaid_pyro 至此 Pagermaid-Pyro 搭建完成，enjoy it~🤪 如需停止程序，使用以下命令即可：\nsystemctl stop pagermaid_pyro 插件说明 如安装插件后遇到插件加载失败的情况，请按照以下步骤解决：\n重新安装插件。 使用 ,restart 命令或在终端中输入 systemctl restart pagermaid_pyro 使程序重启。 在任意对话中发送 ,sh rm -rf ./plugins/* ，然后重新安装插件。 检查环境 Python 版本是否为 Python 3.8+ 。 如仍然不能解决，请重新搭建 PagerMaid-Pyro 。 感谢阅读，我是Tutu，欢迎加入我的Telegram聊天群：https://t.me/hututu000 😻 感谢 本文的featured image(pagermaid-logo) 来自 Wow\u0026rsquo;s Studio。 ","date":"2022-10-02T00:00:00Z","image":"https://tutuis.me/set-up-pagermaid-pyro.webp","permalink":"https://tutuis.me/My-First-Post/","title":"搭建开源的Telegram人形Bot👾｜PagerMaid-Pyro"}]