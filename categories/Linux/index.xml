<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Linux on tutuのBlog</title>
        <link>https://tutuis.me/categories/Linux/</link>
        <description>Recent content in Linux on tutuのBlog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Sun, 02 Oct 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://tutuis.me/categories/Linux/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>搭建开源的Telegram人形Bot👾｜PagerMaid-Pyro</title>
        <link>https://tutuis.me/set-up-pagermaid-pyro/</link>
        <pubDate>Sun, 02 Oct 2022 00:00:00 +0000</pubDate>
        
        <guid>https://tutuis.me/set-up-pagermaid-pyro/</guid>
        <description>&lt;img src="https://tutuis.me/set-up-pagermaid-pyro.webp" alt="Featured image of post 搭建开源的Telegram人形Bot👾｜PagerMaid-Pyro" /&gt;&lt;blockquote&gt;
&lt;h2 id=&#34;前言&#34;&gt;前言&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;最近的Telegram私聊广告莫名很多，使用这个bot的防私聊插件可以很好的&lt;strong&gt;缓解广告的打扰&lt;/strong&gt;。刚好手头有闲置的VPS，索性按照教程简单搭建下。（其实好早就搭建好了🤪&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;本教程基于 &lt;strong&gt;Ubuntu 22.04&lt;/strong&gt; 系统，搭建 Pagermaid-Pyro 的演示环境为AWS-Lightsail机器，其他系统或IDC请自行修改命令安装。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Github 开源地址：&lt;code&gt;https://github.com/TeamPGM/PagerMaid-Pyro&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;官方博客：&lt;code&gt;https://xtaolabs.com&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;官方 Telegram 频道：&lt;code&gt;@PagerMaid_Modify&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;h3 id=&#34;在搭建之前您需要知道&#34;&gt;在搭建之前您需要知道&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Telegram没有明确说明支持Userbot的行为，被杜叔叔分遗产以及导致的任何损失和后果均与PagerMaid项目作者和&lt;a class=&#34;link&#34; href=&#34;https://tutuis.me&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;本站&lt;/strong&gt;&lt;/a&gt;无关。&lt;/li&gt;
&lt;li&gt;您在使用本项目代码时即表示您已经同意本隐私协议并且允许我们以评估负载和修复代码的目的记录您 Bot 的在线状态和报错文件（除可能使用的信息之外，我们不会记录与收集任何信息）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;您需要的基础知识&#34;&gt;您需要的基础知识&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;SSH 连接Linux服务器&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;切换用户为 root  &lt;code&gt;sudo -i&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;略懂一些 &lt;code&gt;Vim&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;让我们开始吧&#34;&gt;让我们开始吧!&lt;/h2&gt;
&lt;h3 id=&#34;开放端口&#34;&gt;开放端口&lt;/h3&gt;
&lt;p&gt;由于需要和telegram服务器通信，我们需要关闭系统内部的防火墙。执行以下代码关闭：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo iptables -P INPUT ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo iptables -P FORWARD ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo iptables -P OUTPUT ACCEPT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo iptables -F
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果您使用了云服务，请去您的云服务商控制台里开放所有端口。（以AWS-Lightsail为例）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-10.09.17.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;截屏2022 10 02 下午10.09.17&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Oracle请移步 &lt;code&gt;网络&lt;/code&gt;-&lt;code&gt;虚拟云网络&lt;/code&gt;-&lt;code&gt;vcn-2022xxxx-xxxx&lt;/code&gt;-&lt;code&gt;安全列表详细信息&lt;/code&gt;-&lt;code&gt;入站规则&lt;/code&gt;-&lt;code&gt;添加入站规则&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;请你像我这样写：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-10.16.23.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;截屏2022 10 02 下午10.16.23&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Azure在&lt;code&gt;设置&lt;/code&gt;-&lt;code&gt;网络&lt;/code&gt;-&lt;code&gt;入站端口规则&lt;/code&gt;，请添加：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;源：Any&lt;/li&gt;
&lt;li&gt;源端口范围：*&lt;/li&gt;
&lt;li&gt;目标：Any&lt;/li&gt;
&lt;li&gt;服务：Custom&lt;/li&gt;
&lt;li&gt;目标端口范围：*&lt;/li&gt;
&lt;li&gt;协议：Any&lt;/li&gt;
&lt;li&gt;操作：允许&lt;/li&gt;
&lt;li&gt;优先级：100&lt;/li&gt;
&lt;li&gt;名称：随便写&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其他的IDC请自行探索规律寻找，有些IDC是默认给开的。&lt;/p&gt;
&lt;h3 id=&#34;拉取项目&#34;&gt;拉取项目&lt;/h3&gt;
&lt;p&gt;先切换为Root用户。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo -i
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在拉取项目之前，首先更新 git ，否则之后可能出现无法更新的情况。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt install --upgrade git -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这步就报错请自行Google：&lt;code&gt;Ubuntu安装git&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;拉取项目至 /var/lib/pagermaid_pyro 目录。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cd /var/lib &amp;amp;&amp;amp; git clone https://github.com/TeamPGM/PagerMaid-Pyro.git pagermaid_pyro &amp;amp;&amp;amp; cd pagermaid_pyro
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;很快就拉取完了。
&lt;a class=&#34;link&#34; href=&#34;https://3o.hk/image/0mIrT&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-10.28.18.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;2022-10-02-10.28.18.png&#34;
	
	
&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;安装依赖&#34;&gt;安装依赖&lt;/h3&gt;
&lt;p&gt;首先更新下apt软件包，安装过程中可能会出现OK确认界面，直接确认即可，如果出现断开连接，必须重新登录root访问pagermaid_pyro目录。
（命令 &lt;code&gt;cd /var/lib/pagermaid_pyro&lt;/code&gt;)&lt;/p&gt;
&lt;h4 id=&#34;完整安装依赖包&#34;&gt;完整安装依赖包&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt install python3-pip imagemagick libwebp-dev neofetch libzbar-dev libxml2-dev libxslt-dev tesseract-ocr tesseract-ocr-all -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;安装软件包过程中，请喝杯咖啡稍等一会儿，安装完成后，继续安装 Python 依赖包，所有的操作都是在&lt;code&gt;/var/lib/pagermaid_pyro&lt;/code&gt;目录下进行的，出现报错检查是否在此目录中。
&lt;a class=&#34;link&#34; href=&#34;https://3o.hk/image/0mbom&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-10.38.46.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;2022-10-02-10.38.46.png&#34;
	
	
&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;done&lt;/p&gt;
&lt;h4 id=&#34;继续安装python依赖&#34;&gt;继续安装Python依赖&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;pip3 install -r requirements.txt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;如果出现 &lt;code&gt;ERROR: Could not open requirements file: [Errno 2] No such file or directory: &#39;requirements.txt&#39;&lt;/code&gt; 报错，请先检查当前目录是否为 &lt;code&gt;/var/lib/pagermaid_pyro&lt;/code&gt; ，如果位于该目录仍然报错，请重新执行 &lt;strong&gt;拉取项目&lt;/strong&gt; 步骤。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-10.42.12.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;2022-10-02-10.42.12.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Success!&lt;/p&gt;
&lt;h3 id=&#34;修改配置文件&#34;&gt;修改配置文件&lt;/h3&gt;
&lt;p&gt;执行以下命令，将配置文件 &lt;code&gt;config.gen.yml&lt;/code&gt; 复制一份并且命名为 &lt;code&gt;config.yml&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cp config.gen.yml config.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;申请telegram-api&#34;&gt;申请Telegram API&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;在 &lt;a class=&#34;link&#34; href=&#34;https://my.telegram.org&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://my.telegram.org&lt;/a&gt; 登陆后点击&lt;code&gt;API development tools&lt;/code&gt;
&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-10.48.40.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;2022-10-02-10.48.40.png&#34;
	
	
&gt;&lt;/li&gt;
&lt;li&gt;按图中这样非常随意的填好（越随意越好），然后点击&lt;code&gt;Create appication&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;保存好得到的&lt;code&gt;App api_id&lt;/code&gt; 和&lt;code&gt;App api_hash&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;回到ssh工具里面，执行命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cd /var/lib/pagermaid_pyro &amp;amp;&amp;amp; vim config.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;不会vim的请自行Google:&lt;code&gt;Vim使用教程&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果你看到的是一片空白：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;你可能不是root用户&lt;/li&gt;
&lt;li&gt;你可能不在正确目录&lt;/li&gt;
&lt;li&gt;确定你执行过&lt;code&gt;cp config.gen.yml config.yml&lt;/code&gt;?&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用你强大的Vim基础知识，将这里替换成你刚刚获取的。（&lt;strong&gt;千万不要删除引号&lt;/strong&gt;！）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-10.57.34.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;2022-10-02-10.57.34.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;运行pagermaid_pyro&#34;&gt;运行Pagermaid_Pyro&lt;/h3&gt;
&lt;p&gt;输入以下指令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  python3 -m pagermaid
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此步需要填入完整的电话号码（eg：+8611451419198，&lt;strong&gt;需要带上国际区号&lt;/strong&gt;）然后 Telegram 会向你的其他客户端发送验证码，填入验证码后，回车，如有两步验证密码，则再输入两步验证密码即可。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Enter phone number or bot token:    #此处填入手机号
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Is &amp;#34;+8611451419198&amp;#34; correct? (y/N): y   # 号码显示正确输入 y ,错误输入 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The confirmation code has been sent via Telegram app
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Enter confirmation code:    # 此处输入 Telegram APP 中收到的验证码
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# 如果设置了两步验证，则会出现以下提示
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The two-step verification is enabled and a password is required
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Password hint: None
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Enter password (empty to recover):    # 此处输入两步验证密码
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;出现已启动提示，代表登录成功，此时可以去 Telegram 任意聊天发送 &lt;code&gt;,help&lt;/code&gt; 进行测试。
&lt;a class=&#34;link&#34; href=&#34;https://3o.hk/image/0mMIj&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;https://3o.hk/images/2022/10/02/2022-10-02-11.03.18.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;2022-10-02-11.03.18.png&#34;
	
	
&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;你的应该没有我这么多，查看 &lt;a class=&#34;link&#34; href=&#34;https://telegra.ph/PagerMaid-Plugins-11-27&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;官方插件列表&lt;/strong&gt;&lt;/a&gt; 按需安装。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;请选择 v2 分支，master 分支为 Pagermaid-Modify（旧版）的插件，二者插件不兼容。&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;命令是 &lt;code&gt;,apt install xxxx&lt;/code&gt;，发在tg任意一个聊天中即可。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;防私聊插件的名字是 &lt;code&gt;pmcaptcha&lt;/code&gt;，我们可以用&lt;code&gt;,apt install pmcaptcha&lt;/code&gt;的命令发送到任何聊天中来安装它。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;写入守护进程&#34;&gt;写入守护进程&lt;/h3&gt;
&lt;p&gt;首先按下 &lt;code&gt;Ctrl&lt;/code&gt; 键和 &lt;code&gt;C&lt;/code&gt; 键停止运行，然后输入以下命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat &amp;lt;&amp;lt;&amp;#39;TEXT&amp;#39; &amp;gt; /etc/systemd/system/pagermaid_pyro.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Unit]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Description=PagerMaid-Pyro telegram utility daemon
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;After=network.target
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Install]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;WantedBy=multi-user.target
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Service]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Type=simple
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;WorkingDirectory=/var/lib/pagermaid_pyro
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ExecStart=/usr/bin/python3 -m pagermaid
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Restart=always
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;TEXT
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;设置完成后启动程序：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl start pagermaid_pyro
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;设置为开机自启：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl enable pagermaid_pyro
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;至此-pagermaid-pyro-搭建完成enjoy-it&#34;&gt;至此 Pagermaid-Pyro 搭建完成，enjoy it~🤪&lt;/h4&gt;
&lt;p&gt;如需停止程序，使用以下命令即可：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl stop pagermaid_pyro
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;h2 id=&#34;插件说明&#34;&gt;插件说明&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;如安装插件后遇到插件加载失败的情况，请按照以下步骤解决：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;重新安装插件。&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;,restart&lt;/code&gt; 命令或在终端中输入 &lt;code&gt;systemctl restart pagermaid_pyro&lt;/code&gt; 使程序重启。&lt;/li&gt;
&lt;li&gt;在任意对话中发送 &lt;code&gt;,sh rm -rf ./plugins/*&lt;/code&gt; ，然后重新安装插件。&lt;/li&gt;
&lt;li&gt;检查环境 Python 版本是否为 Python 3.8+ 。&lt;/li&gt;
&lt;li&gt;如仍然不能解决，请重新搭建 PagerMaid-Pyro 。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;感谢阅读我是tutu欢迎加入我的telegram聊天群httpstmehututu000-&#34;&gt;感谢阅读，我是Tutu，欢迎加入我的Telegram聊天群：&lt;a class=&#34;link&#34; href=&#34;https://t.me/hututu000&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://t.me/hututu000&lt;/a&gt; 😻&lt;/h2&gt;
&lt;h2 id=&#34;感谢&#34;&gt;感谢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;本文的featured image(pagermaid-logo) 来自 &lt;a class=&#34;link&#34; href=&#34;https://daydayday.day/posts/3282828936/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;Wow&amp;rsquo;s Studio&lt;/strong&gt;&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>🧰工具箱｜一些常用的Linux命令</title>
        <link>https://tutuis.me/linux-command-category/</link>
        <pubDate>Mon, 14 Feb 2022 00:00:00 +0000</pubDate>
        
        <guid>https://tutuis.me/linux-command-category/</guid>
        <description>&lt;img src="https://tutuis.me/jammy-jellyfish-wallpaper.png" alt="Featured image of post 🧰工具箱｜一些常用的Linux命令" /&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;以下命令适用于Ubuntu 22.04系统，其他系统自行修改。&lt;/li&gt;
&lt;li&gt;可以透过右侧Widget目录快速查找。&lt;/li&gt;
&lt;li&gt;本文的命令大多是一键脚本，有其他顾虑请自行打开脚本审阅。&lt;/li&gt;
&lt;li&gt;因为要常更新，所以不做多语言支持。&lt;/li&gt;
&lt;li&gt;来源于互联网，有侵权请联系我删除。&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://149366088.v2.pressablecdn.com/wp-content/uploads/2022/03/jammy-jellyfish-wallpaper.jpg&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;featured image&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;开机&#34;&gt;开机&lt;/h2&gt;
&lt;h3 id=&#34;修改为root密码登录ssh&#34;&gt;修改为root密码登录ssh&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;#!/bin/bash
echo root:改我 |sudo chpasswd root
sudo sed -i &#39;s/^#\?PermitRootLogin.*/PermitRootLogin yes/g&#39; /etc/ssh/sshd_config;
sudo sed -i &#39;s/^#\?PasswordAuthentication.*/PasswordAuthentication yes/g&#39; /etc/ssh/sshd_config;
sudo service sshd restart
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;将汉字部分替换成你要修改的ssh登录密码，建议使用密码管理器生成随机强密码。&lt;/li&gt;
&lt;li&gt;「适用于甲骨文」: 粘贴到开机页面 &lt;code&gt;高级选项&lt;/code&gt; &amp;ndash;&amp;gt; &lt;code&gt;粘贴Cloud-init脚本&lt;/code&gt; 里面&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id=&#34;关闭系统防火墙&#34;&gt;关闭系统防火墙&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;iptables -P INPUT ACCEPT
iptables -P OUTPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -F
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;一般的VPS输入这四行就行，&lt;strong&gt;甲骨文&lt;/strong&gt;还要输入下面两行：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;iptables-save &amp;gt; /etc/iptables/rules.v4      
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip6tables-save &amp;gt; /etc/iptables/rules.v6  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;修改ssh端口&#34;&gt;修改ssh端口&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;公网高强度扫描爆破ssh主要针对默认的22端口，为了防止一些不必要的损失，按照下面的指令修改为35768端口吧！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;sed -i &#39;s/#Port 22/Port 35768/&#39; /etc/ssh/sshd_config
service ssh restart
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Port 35768&lt;/code&gt; 可替换为 1-65535 之间的任何数字&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果没把握，可以再处理一遍防火墙。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;检查一下ssh监听端口是否更改成功。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo apt install netstat 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;netstat -antp |grep ssh 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;如果操作iptables后发现和docker相关的服务不能访问，记得运行 &lt;code&gt;systemctl stop docker&lt;/code&gt; &lt;code&gt;systemctl start docker&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;增强&#34;&gt;增强&lt;/h2&gt;
&lt;h3 id=&#34;bbr加速&#34;&gt;BBR加速&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;wget -N --no-check-certificate &amp;quot;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh&amp;quot; &amp;amp;&amp;amp; chmod +x tcp.sh &amp;amp;&amp;amp; ./tcp.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;如果没效果可以试试下面的不卸载内核版本：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -N --no-check-certificate &amp;#34;https://github.000060000.xyz/tcpx.sh&amp;#34; &amp;amp;&amp;amp; chmod +x tcpx.sh &amp;amp;&amp;amp; ./tcpx.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/google/bbr&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;什么是BBR加速?&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;宝塔面板&#34;&gt;宝塔面板&lt;/h3&gt;
&lt;h4 id=&#34;官方版&#34;&gt;官方版&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;amp;&amp;amp; sudo bash install.sh ed8484bec
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;开心版&#34;&gt;开心版&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;wget -O install.sh http://io.bt.sy/install/install-ubuntu_6.0.sh &amp;amp;&amp;amp; sudo bash install.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;国外版aapanel&#34;&gt;国外版（aaPanel）&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;wget -O install.sh http://www.aapanel.com/script/install-ubuntu_6.0_en.sh &amp;amp;&amp;amp; sudo bash install.sh aapanel
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h3 id=&#34;dd&#34;&gt;DD&lt;/h3&gt;
&lt;p&gt;先安装必需依赖&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;apt-get install -y xz-utils openssl gawk file wget screen &amp;amp;&amp;amp; screen -S os
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后在screen下运行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget --no-check-certificate -O NewReinstall.sh https://git.io/newbetags &amp;amp;&amp;amp; chmod a+x NewReinstall.sh &amp;amp;&amp;amp; bash NewReinstall.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;脚本里面有很多系统版本，按照脚本注释选择。&lt;/li&gt;
&lt;li&gt;如果10分钟以后连不上主机，请去控制台处理一遍防火墙。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;查看流媒体解锁情况&#34;&gt;查看流媒体解锁情况&lt;/h3&gt;
&lt;h4 id=&#34;经典永流传版&#34;&gt;经典永流传版&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;bash &amp;lt;(curl -L -s https://raw.githubusercontent.com/lmc999/RegionRestrictionCheck/main/check.sh)
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;由neko提供的更快的脚本&#34;&gt;由Neko提供的更快的脚本&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;bash &amp;lt;(curl -Ls unlock.moe)
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;只检测IPv4结果:  &lt;code&gt;bash &amp;lt;(curl -Ls unlock.moe) -m 4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;只检测IPv6结果:  &lt;code&gt;bash &amp;lt;(curl -Ls unlock.moe) -m 6&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;测速&#34;&gt;测速&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget -qO- --no-check-certificate https://raw.githubusercontent.com/oooldking/script/master/superbench.sh | bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;查看线路信息&#34;&gt;查看线路信息&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;curl https://raw.githubusercontent.com/zhucaidan/mtr_trace/main/mtr_trace.sh|bash
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;安全&#34;&gt;安全&lt;/h2&gt;
&lt;h3 id=&#34;查看ssh登陆日志&#34;&gt;查看SSH登陆日志&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;grep &amp;quot;Failed password&amp;quot; /var/log/auth.log | wc -l
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;这个命令的输出即为SSH登陆失败的次数。&lt;/li&gt;
&lt;li&gt;更多推荐阅读： &lt;a class=&#34;link&#34; href=&#34;https://blog.hlhasd.com/archives/skill/18/830/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;记一次树莓派(Raspbetty)系统ssh被爆破攻击日志分析&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;搭建&#34;&gt;搭建&lt;/h2&gt;
&lt;h3 id=&#34;snell&#34;&gt;Snell&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;wget -O snell.sh --no-check-certificate https://git.io/Snell.sh &amp;amp;&amp;amp; chmod +x snell.sh &amp;amp;&amp;amp; ./snell.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;mtproto代理&#34;&gt;MTProto代理&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;curl -o MTProtoProxyInstall.sh -L https://git.io/fjo34 &amp;amp;&amp;amp; bash MTProtoProxyInstall.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;http代理&#34;&gt;http代理&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;curl -L https://raw.githubusercontent.com/snail007/proxy_admin_free/master/install_auto.sh | bash
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;socks5代理&#34;&gt;Socks5代理&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;wget -q -N --no-check-certificate https://raw.githubusercontent.com/wyx176/nps-socks5/master/install.sh &amp;amp;&amp;amp; chmod 777 install.sh &amp;amp;&amp;amp; bash install.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;附带管理面板
&lt;ul&gt;
&lt;li&gt;面板地址：&lt;code&gt;yourIP:18080&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;默认账号密码：&lt;code&gt;admin admin&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;GitHub地址：&lt;a class=&#34;link&#34; href=&#34;https://github.com/wyx176/nps-socks5&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;strong&gt;NPS-Socks5&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;一键转发&#34;&gt;一键转发&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;wget --no-check-certificate -qO natcfg.sh https://raw.githubusercontent.com/arloor/iptablesUtils/master/natcfg.sh &amp;amp;&amp;amp; bash natcfg.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h1 id=&#34;more-to-be-continued&#34;&gt;More to be continued..&lt;/h1&gt;
&lt;hr&gt;
&lt;h2 id=&#34;欢迎加入我的telegram聊天群httpstmehututu0005-&#34;&gt;欢迎加入我的Telegram聊天群：&lt;a class=&#34;link&#34; href=&#34;https://t.me/hututu000&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://t.me/hututu000&lt;/a&gt; 😻&lt;/h2&gt;
&lt;hr&gt;
&lt;h2 id=&#34;感谢&#34;&gt;感谢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://t.me/Luca_VPS&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Luca的频道&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://t.me/rsakuras&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;rSakuras&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
